# üåê GIAI ƒêO·∫†N 4: X√¢y D·ª±ng APIs Chuy√™n S√¢u - Roadmap Chi Ti·∫øt

> **M·ª•c ti√™u:** Master REST APIs v√† GraphQL APIs development v·ªõi authentication, file upload
> **Th·ªùi gian ∆∞·ªõc t√≠nh:** 6-8 tu·∫ßn (3-4 gi·ªù/ng√†y)
> **Y√™u c·∫ßu:** Ho√†n th√†nh Giai ƒëo·∫°n 1-3
> **C√°ch s·ª≠ d·ª•ng:** H·ªçc t·ª´ng module theo th·ª© t·ª±, h·ªèi AI gi·∫£ng b√†i cho t·ª´ng topic

---

## üèóÔ∏è MODULE 1: REST API FUNDAMENTALS (Tu·∫ßn 1)

### **1.1 REST Architecture Principles**

```
üí° H·ªèi AI: "Gi·∫£i th√≠ch chi ti·∫øt 6 nguy√™n t·∫Øc c·ªßa REST architecture v·ªõi examples"
```

**REST Constraints c·∫ßn hi·ªÉu s√¢u:**

- [ ] **Stateless:** M·ªói request ƒë·ªôc l·∫≠p, kh√¥ng l∆∞u state tr√™n server
- [ ] **Client-Server:** T√°ch bi·ªát concerns, independent evolution
- [ ] **Cacheable:** Responses c√≥ th·ªÉ cache ƒë·ªÉ improve performance
- [ ] **Uniform Interface:** Consistent API design patterns
- [ ] **Layered System:** Multiple layers c√≥ th·ªÉ exist between client-server
- [ ] **Code on Demand (optional):** Server c√≥ th·ªÉ send executable code

### **1.2 RESTful Design Principles**

```
üí° H·ªèi AI: "REST API design best practices - URL structure, HTTP methods, status codes"
```

**URL Design Best Practices:**

- [ ] **Resource naming:** S·ª≠ d·ª•ng nouns, kh√¥ng verbs
- [ ] **Plural resources:** `/users`, `/products`, `/orders`
- [ ] **Nested resources:** `/users/123/orders`, `/posts/456/comments`
- [ ] **Query parameters:** Filtering, sorting, pagination
- [ ] **URL versioning:** `/api/v1/users`, `/api/v2/users`

**HTTP Methods Usage:**

- [ ] **GET:** Retrieve data (safe, idempotent)
- [ ] **POST:** Create new resources
- [ ] **PUT:** Update entire resource (idempotent)
- [ ] **PATCH:** Partial updates
- [ ] **DELETE:** Remove resources (idempotent)
- [ ] **HEAD:** Get headers only
- [ ] **OPTIONS:** Get allowed methods

### **1.3 HTTP Status Codes Mastery**

```
üí° H·ªèi AI: "Complete guide to HTTP status codes for REST APIs v·ªõi use cases"
```

**Status Code Categories:**

- [ ] **2xx Success:**
  - 200 OK, 201 Created, 202 Accepted
  - 204 No Content, 206 Partial Content
- [ ] **3xx Redirection:**
  - 301 Moved Permanently, 302 Found
  - 304 Not Modified
- [ ] **4xx Client Errors:**
  - 400 Bad Request, 401 Unauthorized
  - 403 Forbidden, 404 Not Found
  - 409 Conflict, 422 Unprocessable Entity
- [ ] **5xx Server Errors:**
  - 500 Internal Server Error
  - 502 Bad Gateway, 503 Service Unavailable

### **1.4 API Request/Response Design**

```
üí° H·ªèi AI: "REST API request/response structure best practices v·ªõi JSON examples"
```

**Request Structure:**

- [ ] **Headers:** Content-Type, Accept, Authorization
- [ ] **Body format:** JSON structure conventions
- [ ] **Error handling:** Consistent error response format
- [ ] **Content negotiation:** Accept headers

**Response Structure:**

- [ ] **Success responses:** Data wrapping strategies
- [ ] **Error responses:** Error codes, messages, details
- [ ] **Metadata:** Pagination info, timestamps
- [ ] **HATEOAS:** Hypermedia links (advanced)

**Project nh·ªè:** Design v√† document REST API cho blog system

---

## üõ†Ô∏è MODULE 2: EXPRESS REST API IMPLEMENTATION (Tu·∫ßn 1-2)

### **2.1 Express Router Architecture**

```
üí° H·ªèi AI: "Express Router organization cho large-scale REST APIs"
```

**Router Organization:**

- [ ] **Route separation:** Separate files cho each resource
- [ ] **Router mounting:** Express app.use() v·ªõi base paths
- [ ] **Middleware binding:** Router-level middleware
- [ ] **Route parameters:** Path parameters v√† validation
- [ ] **Route handlers:** Controller functions organization

### **2.2 API Controllers Design**

```
üí° H·ªèi AI: "REST API controller patterns v√† error handling strategies"
```

**Controller Structure:**

- [ ] **CRUD operations:** Create, Read, Update, Delete methods
- [ ] **Async/await patterns:** Proper async handling
- [ ] **Error handling:** Try-catch, error propagation
- [ ] **Response formatting:** Consistent response structure
- [ ] **Business logic separation:** Thin controllers, fat services

### **2.3 API Middleware Stack**

```
üí° H·ªèi AI: "Essential middleware cho REST APIs - CORS, rate limiting, logging"
```

**Core Middleware:**

- [ ] **CORS configuration:** Cross-Origin Resource Sharing
- [ ] **Rate limiting:** Request throttling
- [ ] **Request logging:** Morgan, Winston
- [ ] **Body parsing:** JSON, URL-encoded
- [ ] **Compression:** Gzip compression
- [ ] **Security headers:** Helmet.js

### **2.4 API Validation & Sanitization**

```
üí° H·ªèi AI: "API input validation patterns v·ªõi express-validator cho REST endpoints"
```

**Validation Strategies:**

- [ ] **Request validation:** Body, params, query validation
- [ ] **Schema validation:** Joi, express-validator
- [ ] **Custom validators:** Business rule validation
- [ ] **Error aggregation:** Multiple validation errors
- [ ] **Sanitization:** Input cleaning for security

**B√†i t·∫≠p:** Build complete CRUD API cho User resource

---

## üîê MODULE 3: JWT AUTHENTICATION FOR APIs (Tu·∫ßn 2)

### **3.1 Token-Based Authentication Concepts**

```
üí° H·ªèi AI: "Token-based authentication vs session-based - ∆∞u nh∆∞·ª£c ƒëi·ªÉm v√† use cases"
```

**Authentication Strategies:**

- [ ] **Session vs Token comparison**
- [ ] **Stateless authentication benefits**
- [ ] **Token security considerations**
- [ ] **Multi-device authentication**
- [ ] **API scalability implications**

### **3.2 JWT (JSON Web Tokens) Deep Dive**

```
üí° H·ªèi AI: "JWT structure, signing algorithms, v√† security best practices"
```

**JWT Fundamentals:**

- [ ] **JWT Structure:** Header, Payload, Signature
- [ ] **Claims:** Standard v√† custom claims
- [ ] **Signing algorithms:** HMAC vs RSA
- [ ] **Token expiration:** exp claim, token lifecycle
- [ ] **Security considerations:** Secret management, algorithm attacks

### **3.3 JWT Implementation v·ªõi Node.js**

```
üí° H·ªèi AI: "jsonwebtoken library - sign, verify, v√† middleware implementation"
```

**JWT Operations:**

- [ ] **Token generation:** `jwt.sign()` v·ªõi options
- [ ] **Token verification:** `jwt.verify()` v√† error handling
- [ ] **Payload structure:** User info, permissions, expiration
- [ ] **Secret management:** Environment variables, rotation
- [ ] **Error handling:** Invalid tokens, expired tokens

### **3.4 Authentication Middleware**

```
üí° H·ªèi AI: "JWT authentication middleware cho Express APIs"
```

**Middleware Implementation:**

- [ ] **Token extraction:** Authorization header, cookies
- [ ] **Token validation:** Signature v√† expiration
- [ ] **User context:** Attach user to request
- [ ] **Error responses:** 401 vs 403 status codes
- [ ] **Optional authentication:** Some routes public/private

### **3.5 Token Refresh Strategies**

```
üí° H·ªèi AI: "Refresh token patterns v√† implementation cho long-lived sessions"
```

**Refresh Token Patterns:**

- [ ] **Access + Refresh tokens:** Short vs long-lived
- [ ] **Token rotation:** Security through rotation
- [ ] **Refresh endpoints:** Token renewal API
- [ ] **Logout handling:** Token invalidation
- [ ] **Security considerations:** Refresh token storage

**Project:** Complete authentication system cho API

---

## üõ°Ô∏è MODULE 4: API AUTHORIZATION & SECURITY (Tu·∫ßn 3)

### **4.1 Role-Based Access Control (RBAC)**

```
üí° H·ªèi AI: "RBAC implementation cho REST APIs v·ªõi JWT claims"
```

**Authorization Strategies:**

- [ ] **Role definition:** User roles trong JWT payload
- [ ] **Permission mapping:** Roles to permissions
- [ ] **Route protection:** Role-based middleware
- [ ] **Resource ownership:** User-specific resource access
- [ ] **Admin overrides:** Superuser permissions

### **4.2 API Security Best Practices**

```
üí° H·ªèi AI: "API security checklist - rate limiting, input validation, security headers"
```

**Security Measures:**

- [ ] **Rate limiting:** Per-user, per-endpoint limits
- [ ] **Input validation:** All inputs validated
- [ ] **SQL injection prevention:** ORM protection
- [ ] **XSS prevention:** Output encoding
- [ ] **Security headers:** CORS, CSP, etc.
- [ ] **API versioning:** Backward compatibility
- [ ] **Audit logging:** Security event logging

### **4.3 API Documentation**

```
üí° H·ªèi AI: "OpenAPI (Swagger) documentation cho REST APIs"
```

**Documentation Tools:**

- [ ] **OpenAPI specification:** YAML/JSON schema
- [ ] **Swagger UI:** Interactive documentation
- [ ] **Code generation:** Client SDK generation
- [ ] **Testing integration:** Documentation-driven testing
- [ ] **Versioning:** API version documentation

**Project:** Secure blog API v·ªõi authentication, authorization, documentation

---

## üì§ MODULE 5: FILE UPLOAD IN APIs (Tu·∫ßn 3-4)

### **5.1 API File Upload Patterns**

```
üí° H·ªèi AI: "File upload strategies cho REST APIs - multipart, base64, direct upload"
```

**Upload Strategies:**

- [ ] **Multipart form-data:** Traditional file upload
- [ ] **Base64 encoding:** JSON-embedded files
- [ ] **Direct cloud upload:** Signed URLs
- [ ] **Chunked upload:** Large file handling
- [ ] **Background processing:** Async file processing

### **5.2 Multer Configuration cho APIs**

```
üí° H·ªèi AI: "Multer advanced configuration cho API endpoints"
```

**Multer API Setup:**

- [ ] **Memory vs disk storage:** API-specific considerations
- [ ] **File filtering:** MIME type validation
- [ ] **Size limits:** Per-file v√† total limits
- [ ] **Error handling:** Upload error responses
- [ ] **Multiple files:** Array v√† fields handling

### **5.3 File Processing & Validation**

```
üí° H·ªèi AI: "File validation, processing, v√† storage cho API uploads"
```

**File Processing:**

- [ ] **File type validation:** Real MIME type checking
- [ ] **Image processing:** Resizing, optimization
- [ ] **Virus scanning:** Security considerations
- [ ] **Metadata extraction:** File information
- [ ] **Storage strategies:** Local, cloud, CDN

### **5.4 File Response Strategies**

```
üí° H·ªèi AI: "API responses cho file operations - URLs, metadata, download endpoints"
```

**Response Patterns:**

- [ ] **Upload responses:** File URLs, metadata
- [ ] **Download endpoints:** File serving APIs
- [ ] **Thumbnail generation:** Image variants
- [ ] **Temporary URLs:** Signed download links
- [ ] **Bulk operations:** Multiple file handling

**Project:** File management API v·ªõi upload, processing, download

---

## üéØ MODULE 6: GRAPHQL FUNDAMENTALS (Tu·∫ßn 4-5)

### **6.1 GraphQL vs REST Comparison**

```
üí° H·ªèi AI: "GraphQL advantages over REST - over-fetching, under-fetching solutions"
```

**GraphQL Benefits:**

- [ ] **Single endpoint:** vs multiple REST endpoints
- [ ] **Query flexibility:** Client-specified data
- [ ] **Type safety:** Schema-driven development
- [ ] **Real-time subscriptions:** Built-in support
- [ ] **Introspection:** Self-documenting APIs

### **6.2 GraphQL Schema Definition**

```
üí° H·ªèi AI: "GraphQL schema design - types, queries, mutations v·ªõi examples"
```

**Schema Components:**

- [ ] **Scalar types:** String, Int, Boolean, ID
- [ ] **Object types:** Custom data structures
- [ ] **Enum types:** Predefined values
- [ ] **Interface types:** Shared fields
- [ ] **Union types:** Multiple possible types
- [ ] **Input types:** Mutation arguments

### **6.3 GraphQL Queries & Mutations**

```
üí° H·ªèi AI: "GraphQL query language - syntax, variables, fragments"
```

**Query Language:**

- [ ] **Basic queries:** Field selection
- [ ] **Query variables:** Dynamic queries
- [ ] **Fragments:** Reusable field sets
- [ ] **Aliases:** Field renaming
- [ ] **Mutations:** Data modification
- [ ] **Query complexity:** Depth limiting

### **6.4 Resolvers Implementation**

```
üí° H·ªèi AI: "GraphQL resolvers - data fetching v√† business logic"
```

**Resolver Patterns:**

- [ ] **Field resolvers:** Individual field logic
- [ ] **Parent context:** Nested data resolution
- [ ] **Async resolvers:** Database integration
- [ ] **Error handling:** GraphQL error responses
- [ ] **Performance:** N+1 query problem

**B√†i t·∫≠p:** Basic GraphQL schema cho blog system

---

## ‚ö° MODULE 7: APOLLO SERVER IMPLEMENTATION (Tu·∫ßn 5)

### **7.1 Apollo Server Setup**

```
üí° H·ªèi AI: "Apollo Server v·ªõi Express integration - setup v√† configuration"
```

**Apollo Server Configuration:**

- [ ] **Server setup:** apollo-server-express
- [ ] **Schema definition:** Type definitions
- [ ] **Resolver organization:** File structure
- [ ] **Context setup:** Request context
- [ ] **Playground:** Development tools

### **7.2 DataLoaders & Performance**

```
üí° H·ªèi AI: "DataLoader pattern ƒë·ªÉ solve N+1 queries trong GraphQL"
```

**Performance Optimization:**

- [ ] **N+1 problem:** Understanding the issue
- [ ] **DataLoader implementation:** Batching, caching
- [ ] **Database optimization:** Query batching
- [ ] **Caching strategies:** Per-request caching
- [ ] **Query complexity analysis:** Cost calculation

### **7.3 GraphQL Authentication**

```
üí° H·ªèi AI: "Authentication trong GraphQL - context, directives, v√† authorization"
```

**Auth Implementation:**

- [ ] **Context authentication:** JWT trong context
- [ ] **Directive-based auth:** @auth, @hasRole
- [ ] **Field-level security:** Resolver protection
- [ ] **Error handling:** Auth error responses
- [ ] **Schema stitching:** Multi-service auth

### **7.4 GraphQL Subscriptions**

```
üí° H·ªèi AI: "Real-time subscriptions trong GraphQL v·ªõi Apollo Server"
```

**Real-time Features:**

- [ ] **Subscription setup:** WebSocket configuration
- [ ] **PubSub patterns:** Event publishing
- [ ] **Subscription resolvers:** Real-time data
- [ ] **Authentication:** Subscription security
- [ ] **Scaling considerations:** Multiple servers

**Major Project:** Complete GraphQL API v·ªõi authentication, subscriptions

---

## üß™ MODULE 8: API TESTING & DOCUMENTATION (Tu·∫ßn 6)

### **8.1 API Testing Strategies**

```
üí° H·ªèi AI: "API testing approaches - unit, integration, end-to-end testing"
```

**Testing Levels:**

- [ ] **Unit testing:** Individual functions
- [ ] **Integration testing:** API endpoints
- [ ] **Contract testing:** API schema validation
- [ ] **Performance testing:** Load testing
- [ ] **Security testing:** Vulnerability scanning

### **8.2 Supertest cho REST API Testing**

```
üí° H·ªèi AI: "Supertest library - HTTP assertion testing cho Express APIs"
```

**Supertest Usage:**

- [ ] **Test setup:** Test database, server
- [ ] **HTTP requests:** GET, POST, PUT, DELETE tests
- [ ] **Assertions:** Status codes, response bodies
- [ ] **Authentication testing:** JWT token tests
- [ ] **Error scenario testing:** Edge cases

### **8.3 GraphQL Testing**

```
üí° H·ªèi AI: "GraphQL API testing - query testing, resolver testing"
```

**GraphQL Test Patterns:**

- [ ] **Query testing:** Valid/invalid queries
- [ ] **Mutation testing:** Data changes
- [ ] **Resolver testing:** Isolated resolver tests
- [ ] **Schema testing:** Type validation
- [ ] **Subscription testing:** Real-time events

### **8.4 API Documentation Tools**

```
üí° H·ªèi AI: "API documentation tools - Swagger, Postman, GraphQL Playground"
```

**Documentation Strategies:**

- [ ] **OpenAPI/Swagger:** REST API docs
- [ ] **Postman collections:** API testing docs
- [ ] **GraphQL introspection:** Self-documenting
- [ ] **Code examples:** Client integration
- [ ] **Versioning docs:** API evolution

**Final Project:** Production-ready API v·ªõi complete testing suite

---

## üéØ CHECKLIST HO√ÄN TH√ÄNH GIAI ƒêO·∫†N 4

### **REST API Mastery:**

- [ ] Understand v√† apply REST architectural principles
- [ ] Design RESTful endpoints v·ªõi proper HTTP methods
- [ ] Implement JWT authentication cho APIs
- [ ] Handle file uploads trong REST APIs
- [ ] Apply proper error handling v√† status codes
- [ ] Implement rate limiting v√† security measures

### **GraphQL Proficiency:**

- [ ] Understand GraphQL advantages over REST
- [ ] Design GraphQL schemas v·ªõi types v√† resolvers
- [ ] Implement authentication trong GraphQL
- [ ] Handle real-time subscriptions
- [ ] Optimize performance v·ªõi DataLoaders
- [ ] Solve N+1 query problems

### **API Security & Best Practices:**

- [ ] Implement JWT-based authentication
- [ ] Apply role-based authorization
- [ ] Validate v√† sanitize all inputs
- [ ] Implement proper error handling
- [ ] Apply security headers v√† CORS
- [ ] Document APIs thoroughly

### **File Handling:**

- [ ] Handle file uploads securely
- [ ] Validate file types v√† sizes
- [ ] Process files (resize, optimize)
- [ ] Store files efficiently
- [ ] Serve files v·ªõi proper headers

### **Testing & Documentation:**

- [ ] Write comprehensive API tests
- [ ] Test authentication flows
- [ ] Document APIs v·ªõi OpenAPI/GraphQL schema
- [ ] Perform load testing
- [ ] Test error scenarios

### **Projects Completed:**

- [ ] ‚úÖ Complete REST API v·ªõi authentication
- [ ] ‚úÖ File upload/download API
- [ ] ‚úÖ Secure blog API v·ªõi JWT
- [ ] ‚úÖ GraphQL API v·ªõi subscriptions
- [ ] ‚úÖ Production-ready API v·ªõi testing

### **Advanced Skills:**

- [ ] API versioning strategies
- [ ] Performance optimization
- [ ] Real-time features implementation
- [ ] Security best practices
- [ ] Production deployment considerations

---

## üöÄ CHU·∫®N B·ªä CHO GIAI ƒêO·∫†N 5

Sau khi ho√†n th√†nh Giai ƒëo·∫°n 4, b·∫°n ƒë√£ s·∫µn s√†ng cho:

- Real-time applications v·ªõi WebSockets
- Automated testing strategies
- Deployment v√† production considerations
- Performance optimization
- Monitoring v√† logging

**Portfolio Achievement:** B·∫°n c√≥ th·ªÉ build production-grade APIs v·ªõi authentication, file handling, real-time features, v√† comprehensive testing! üéâ

**Key Skills Mastered:**

- RESTful API design principles
- JWT authentication implementation
- GraphQL development
- API security best practices
- File upload handling
- API testing v√† documentation
- Real-time features v·ªõi subscriptions
